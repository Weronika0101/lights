

ScreenManager:
    ScreenStart:
    ScreenAddHub:
    ScreenChooseHub:
    ScreenListHubs:
    ScreenChooseShape:
    ScreenLogin:
    ScreenRegister:
    ScreenSimulator:


<ScreenStart>:
    name:'start'
    canvas.before :
        Color:
            rgba: (0, 0, 0, 0.7)
        Rectangle :
            pos: self.pos
            size: self.size
            #source: 'gradient.jpg'
    MDCard:
        md_bg_color: [30/255, 30/255, 30/255, 1]  # Czarny kolor tła karty
        size_hint: None, None
        size: 420, 500
        pos_hint: {"center_x": .5, "center_y": .5}
        elevation: 5
        padding: 20
        spacing: 30
        BoxLayout:
            orientation: 'vertical'
            spacing: 30
            MDLabel:
                text: 'LIGHTS'
                font_style: 'Button'
                font_size: 45

                halign: "center"
                color: app.theme_cls.primary_color  # niebieski kolor tekstu
            MDFillRoundFlatButton:
                text: 'DODAJ HUBA'
                pos_hint: {"center_x": .5,"center_y": .1}
                spacing: 20
                font_size: 18
                theme_text_color: "Primary"  # Ustaw kolor tekstu przycisku na domyślny
                md_bg_color: [128/255, 0/255, 128/255, 1]  # Fioletowy kolor tła przycisku
                elevation_normal: 10
                on_press: root.manager.current = 'addhub'
            MDFillRoundFlatButton:
                text: 'ZALOGUJ SIĘ'
                pos_hint: {"center_x": .5,"center_y": .2}
                spacing: 20
                font_size: 18
                theme_text_color: "Primary"  # Ustaw kolor tekstu przycisku na domyślny
                md_bg_color: [128/255, 0/255, 128/255, 1]  # Fioletowy kolor tła przycisku
                elevation_normal: 10
                on_press: root.manager.current = 'login'
            MDTextButton:
                text: "Nie masz konta? Zarejestruj się"
                font_size: 16
                height: self.texture_size[1] + dp(40)
                color: [128/255, 0/255, 128/255, 1]
                pos_hint: {"center_x": .5,"center_y": .5}
                #on_release: app.root.current = 'registration'  # Przekierowanie do ekranu rejestracji
                on_press: root.manager.current = 'register'

<ScreenAddHub>:
    name: 'addhub'
    FloatLayout:
        canvas.before:
            Color:
                rgba: [30/255, 30/255, 30/255, 1]
            Rectangle:
                pos: self.pos
                size: self.size
        BoxLayout:
            orientation: 'vertical'
            spacing: 50
            #pos_hint: 'center'
            pos_hint: {"center_y": .75}  # Ta linia ustawia kontener na środku ekranu
            MDLabel:
                text: 'DODAWANIE HUBA'
                font_style: 'Button'
                font_size: 45
                halign: "center"
                size_hint_y: None
                height: self.texture_size[1]
                color: [128/255, 0/255, 128/255, 1]

            MDFillRoundFlatButton:
                text: 'DODAJ AUTOMATYCZNIE'
                pos_hint: {"center_x": .5}
                spacing: 20
                font_size: 17
                theme_text_color: "Primary"
                md_bg_color: [128/255, 0/255, 128/255, 1]
                elevation_normal: 10
                on_press: root.add_hub()  # Dodaj funkcję automatycznego łaczenia z hubem
            MDLabel:
                text: 'Pamiętaj, że żeby dodać huba, \n musisz być w tej samej sieci, co hub'
                #font_style: 'Button'
                font_size: 16
                halign: "center"
                size_hint_y: None
                height: self.texture_size[1]
                color: [128/255, 0/255, 128/255, 1]
            MDIconButton:
                icon: "keyboard-backspace"
                pos_hint: {"center_x": .5}
                spacing: 0
                font_size: 13
                theme_text_color: "Custom"
                text_color: "deepskyblue"
                on_press: root.manager.current = 'start'
<ScreenListHubs>:
    name: 'list'
    FloatLayout:
        canvas.before:
            Color:
                rgba: [30/255, 30/255, 30/255, 1]
            Rectangle:
                pos: self.pos
                size: self.size
        MDLabel:
            pos_hint: {'x':0, 'y':0.8}
            text: 'HUBY W TWOJEJ SIECI'
            font_style: 'Button'
            font_size: 45
            halign: "center"
            size_hint_y: None
            height: self.texture_size[1]
            color: [128/255, 0/255, 128/255, 1]
        MDLabel:
            text: 'Wybierz huba, by dodać go do bazy'
            pos_hint: {'x':0, 'y':0.75}
            #font_style: 'Button'
            font_size: 16
            halign: "center"
            size_hint_y: None
            height: self.texture_size[1]
            color: [128/255, 0/255, 128/255, 1]
        BoxLayout:
            orientation: 'vertical'
            spacing: 10
            padding: 10
            size_hint: (None, None)
            size: (300, 400)
            #pos_hint: {'x': 0.3, 'y': 0.5}
            pos_hint: {'x': 0.3, 'y': 0.5}

<ScreenChooseHub>:
    name: 'choose'
    FloatLayout:
        canvas.before:
            Color:
                rgba: [30/255, 30/255, 30/255, 1]
            Rectangle:
                pos: self.pos
                size: self.size
        MDLabel:
            pos_hint: {'x':0, 'y':0.8}
            text: 'DOSTĘPNE HUBY'
            font_style: 'Button'
            font_size: 45
            halign: "center"
            size_hint_y: None
            height: self.texture_size[1]
            color: [128/255, 0/255, 128/255, 1]
        MDLabel:
            text: 'Upewnij się, że wybrany hub jest w tej samej sieci, co twoje urządzenie'
            pos_hint: {'x':0, 'y':0.75}
            #font_style: 'Button'
            font_size: 16
            halign: "center"
            size_hint_y: None
            height: self.texture_size[1]
            color: [128/255, 0/255, 128/255, 1]
        MDIconButton:
            icon: "keyboard-backspace"
            pos_hint: {'x':0.45, 'y':0.3}
            spacing: 0
            font_size: 13
            theme_text_color: "Custom"
            text_color: "deepskyblue"
            on_press: root.manager.current = 'start'
        GridLayout:
            cols: 7
            spacing: 30
            size_hint: 1, 1/6
            height: 100
            pos_hint: {'x': 0.3, 'y': 0.5}

<ScreenChooseShape>:
    name: 'shape'
    FloatLayout:
        canvas.before:
            Color:
                rgba: [30/255, 30/255, 30/255, 1]
            Rectangle:
                pos: self.pos
                size: self.size
        MDLabel:
            pos_hint: {'x':0, 'y':0.8}
            text: 'DOSTĘPNE SIATKI'
            font_style: 'Button'
            font_size: 45
            halign: "center"
            size_hint_y: None
            height: self.texture_size[1]
            color: [128/255, 0/255, 128/255, 1]
        MDLabel:
            text: 'Wybierz jedną z możliwości ustawienia kasetonów by przejść dalej'
            pos_hint: {'x':0, 'y':0.75}
            #font_style: 'Button'
            font_size: 16
            halign: "center"
            size_hint_y: None
            height: self.texture_size[1]
            color: [128/255, 0/255, 128/255, 1]
        GridLayout:
            cols: 7
            spacing: 30
            size_hint: 1, 1/6
            height: 100
            pos_hint: {'x': 0.3, 'y': 0.5}

<ScreenLogin>:
    name: 'login'
    canvas.before :
        Color:
            rgba: (0, 0, 0, 0.7)
        Rectangle :
            pos: self.pos
            size: self.size
    MDCard:
        md_bg_color: [30/255, 30/255, 30/255, 1]  # Czarny kolor tła karty
        size_hint: None, None
        size: 420, 510
        pos_hint: {"center_x": .5, "center_y": .5}
        elevation: 5
        padding: 20
        spacing: 30
        BoxLayout:
            orientation: 'vertical'
            spacing: 15
            #padding_top: dp(10)
            BoxLayout:  # Dodaj pusty BoxLayout jako odstęp
                size_hint_y: None
                height: dp(35)
            MDLabel:
                text: 'LOGOWANIE'
                font_style: 'Button'
                font_size: 45
                halign: "center"
                size_hint_y: None
                height: self.texture_size[1]
                color: [128/255, 0/255, 128/255, 1]  # Fioletowy kolor tekstu
            MDTextField:
                id : email
                mode : "rectangle"
                text_color_normal: (1,1,1,1)
                line_color_normal: app.theme_cls.primary_color
                hint_text: "adres e-mail"
                hint_text_color_normal: app.theme_cls.primary_color
                icon_right_color_normal : app.theme_cls.primary_color
                icon_right: "account"
                size_hint_x: None
                width: 280
                font_size: 20
                pos_hint: {"center_x": .5}
            MDTextField:
                id: password
                mode : "rectangle"
                spacing: 20
                text_color_normal: (1,1,1,1)
                line_color_normal: app.theme_cls.primary_color
                hint_text_color_normal: app.theme_cls.primary_color
                icon_right_color_normal : app.theme_cls.primary_color
                hint_text: "hasło"
                icon_right: "eye-off"
                size_hint_x: None
                width: 280
                font_size: 20
                pos_hint: {"center_x": .5}
                password: True
            MDFillRoundFlatButton:
               # border: (10,10,10,10)
               # font_size: "18sp"
                #spacing : 40
                text: 'ZALOGUJ SIĘ'
                pos_hint: {"center_x": .5}
                spacing: 20
                font_size: 17
                theme_text_color: "Primary"
                md_bg_color: [128/255, 0/255, 128/255, 1]  # Fioletowy kolor tła przycisku
                elevation_normal: 10
                on_press: root.login(str(root.ids.email.text),str(root.ids.password.text))
                #on_press: root.manager.current = 'simulator'
            MDTextButton:
                text: "Nie masz konta? Zarejestruj się"
                font_size: 16
                height: self.texture_size[1] + dp(20)
                color: [128/255, 0/255, 128/255, 1]
                pos_hint: {"center_x": .5}
                on_press: root.manager.current = 'register'
            MDIconButton:
                icon: "keyboard-backspace"
                pos_hint: {"center_x": .5}
                spacing: 0
                font_size: 13
                theme_text_color: "Custom"
                text_color: "deepskyblue"
                on_press: root.manager.current = 'start'

<ScreenRegister>:
    name: 'register'
    FloatLayout:
        canvas.before:
            Color:
                rgba: [30/255, 30/255, 30/255, 1]
            Rectangle:
                pos: self.pos
                size: self.size
        BoxLayout:
            orientation: 'vertical'
            spacing: 20
            #pos_hint: 'center'
            pos_hint: {"center_y": .6}


            MDLabel:
                text: 'REJESTRACJA'
                font_style: 'Button'
                font_size: 45
                halign: "center"
                size_hint_y: None
                height: self.texture_size[1]
                color: [128/255, 0/255, 128/255, 1]

            MDTextField:
                id: username
                mode : "rectangle"
                text_color_normal: (1,1,1,1)
                line_color_normal: app.theme_cls.primary_color
                hint_text: "nazwa użytkownika"
                hint_text_color_normal: app.theme_cls.primary_color
                icon_right_color_normal : app.theme_cls.primary_color
                icon_right: "account"
                size_hint_x: None
                width: 280
                font_size: 20
                pos_hint: {"center_x": .5}

            MDTextField:
                id: email
                mode : "rectangle"
                spacing: 20
                text_color_normal: (1,1,1,1)
                line_color_normal: app.theme_cls.primary_color
                hint_text_color_normal: app.theme_cls.primary_color
                icon_right_color_normal : app.theme_cls.primary_color
                hint_text: "adres e-mail"
                icon_right: "email"
                size_hint_x: None
                width: 280
                font_size: 20
                pos_hint: {"center_x": .5}

            MDTextField:
                id: password
                mode : "rectangle"
                spacing: 20
                text_color_normal: (1,1,1,1)
                line_color_normal: app.theme_cls.primary_color
                hint_text_color_normal: app.theme_cls.primary_color
                icon_right_color_normal : app.theme_cls.primary_color
                hint_text: "hasło"
                icon_right: "eye-off"
                size_hint_x: None
                width: 280
                font_size: 20
                pos_hint: {"center_x": .5}
                password: True

            MDTextField:
                id: confirm_password
                mode : "rectangle"
                spacing: 20
                text_color_normal: (1,1,1,1)
                line_color_normal: app.theme_cls.primary_color
                hint_text_color_normal: app.theme_cls.primary_color
                icon_right_color_normal : app.theme_cls.primary_color
                hint_text: "potwierdź hasło"
                icon_right: "eye-off"
                size_hint_x: None
                width: 280
                font_size: 20
                pos_hint: {"center_x": .5}
                password: True


            MDFillRoundFlatButton:
                text: 'ZAREJESTRUJ SIĘ'
                pos_hint: {"center_x": .5}
                spacing: 20
                font_size: 17
                theme_text_color: "Primary"
                md_bg_color: [128/255, 0/255, 128/255, 1]
                elevation_normal: 10
                on_release: root.register(str(root.ids.email.text),str(root.ids.username.text),str(root.ids.password.text),str(root.ids.confirm_password.text))  # Dodaj funkcję rejestracji

            MDTextButton:
                text: "Masz już konto? Zaloguj się"
                font_size: 16
                height: self.texture_size[1] + dp(20)
                color: [128/255, 0/255, 128/255, 1]
                pos_hint: {"center_x": .5}
                on_press: root.manager.current = 'login'  # Przekierowanie do ekranu logowania

            MDIconButton:
                icon: "keyboard-backspace"
                pos_hint: {"center_x": .5}
                spacing: 0
                font_size: 13
                theme_text_color: "Custom"
                text_color: "deepskyblue"
                on_press: root.manager.current = 'start'

<ScreenSimulator>:
    name: 'simulator'
    BoxLayout:
        orientation: 'vertical'

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: 50
            Button:
                text: 'Generate'
                on_release: root.generate_rectangle()

        GridLayout:
            id: rectangle_grid
            size_hint: 0.8, 0.8
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            cols: 1
            spacing: 10


